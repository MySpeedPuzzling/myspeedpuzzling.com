{"version":3,"file":"Drift.js","names":["Drift","triggerEl","options","VERSION","destroy","bind","TypeError","namespace","showWhitespaceAtEdges","containInline","inlineOffsetX","inlineOffsetY","inlineContainer","document","body","sourceAttribute","zoomFactor","paneContainer","undefined","inlinePane","handleTouch","onShow","onHide","injectBaseStyles","hoverDelay","touchDelay","hoverBoundingBox","touchBoundingBox","boundingBoxContainer","passive","settings","_buildZoomPane","_buildTrigger","zoomPane","container","inline","trigger","el","imageURL","_setImageURL","enabled","_hide","_unbindEvents","isShowing","zf","boundingBox","Object","defineProperty","prototype","get","set","value","setZoomImageURL","disable","enable"],"sources":["../src/js/Drift.js"],"sourcesContent":["import { isDOMElement } from \"./util/dom\";\nimport injectBaseStylesheet from \"./injectBaseStylesheet\";\n\nimport Trigger from \"./Trigger\";\nimport ZoomPane from \"./ZoomPane\";\n\nexport default class Drift {\n  constructor(triggerEl, options = {}) {\n    this.VERSION = \"1.5.1\";\n    this.triggerEl = triggerEl;\n\n    this.destroy = this.destroy.bind(this);\n\n    if (!isDOMElement(this.triggerEl)) {\n      throw new TypeError(\"`new Drift` requires a DOM element as its first argument.\");\n    }\n\n    // Prefix for generated element class names (e.g. `my-ns` will\n    // result in classes such as `my-ns-pane`. Default `drift-`\n    // prefixed classes will always be added as well.\n    const namespace = options[\"namespace\"] || null;\n    // Whether the ZoomPane should show whitespace when near the edges.\n    const showWhitespaceAtEdges = options[\"showWhitespaceAtEdges\"] || false;\n    // Whether the inline ZoomPane should stay inside\n    // the bounds of its image.\n    const containInline = options[\"containInline\"] || false;\n    // How much to offset the ZoomPane from the\n    // interaction point when inline.\n    const inlineOffsetX = options[\"inlineOffsetX\"] || 0;\n    const inlineOffsetY = options[\"inlineOffsetY\"] || 0;\n    // A DOM element to append the inline ZoomPane to\n    const inlineContainer = options[\"inlineContainer\"] || document.body;\n    // Which trigger attribute to pull the ZoomPane image source from.\n    const sourceAttribute = options[\"sourceAttribute\"] || \"data-zoom\";\n    // How much to magnify the trigger by in the ZoomPane.\n    // (e.g., `zoomFactor: 3` will result in a 900 px wide ZoomPane imag\n    // if the trigger is displayed at 300 px wide)\n    const zoomFactor = options[\"zoomFactor\"] || 3;\n    // A DOM element to append the non-inline ZoomPane to.\n    // Required if `inlinePane !== true`.\n    const paneContainer = options[\"paneContainer\"] === undefined ? document.body : options[\"paneContainer\"];\n    // When to switch to an inline ZoomPane. This can be a boolean or\n    // an integer. If `true`, the ZoomPane will always be inline,\n    // if `false`, it will switch to inline when `windowWidth <= inlinePane`\n    const inlinePane = options[\"inlinePane\"] || 375;\n    // If `true`, touch events will trigger the zoom, like mouse events.\n    const handleTouch = \"handleTouch\" in options ? !!options[\"handleTouch\"] : true;\n    // If present (and a function), this will be called\n    // whenever the ZoomPane is shown.\n    const onShow = options[\"onShow\"] || null;\n    // If present (and a function), this will be called\n    // whenever the ZoomPane is hidden.\n    const onHide = options[\"onHide\"] || null;\n    // Add base styles to the page. See the \"Theming\"\n    // section of README.md for more information.\n    const injectBaseStyles = \"injectBaseStyles\" in options ? !!options[\"injectBaseStyles\"] : true;\n    // An optional number that determines how long to wait before\n    // showing the ZoomPane because of a `mouseenter` event.\n    const hoverDelay = options[\"hoverDelay\"] || 0;\n    // An optional number that determines how long to wait before\n    // showing the ZoomPane because of a `touchstart` event.\n    // It's unlikely that you would want to use this option, since\n    // \"tap and hold\" is much more intentional than a hover event.\n    const touchDelay = options[\"touchDelay\"] || 0;\n    // If true, a bounding box will show the area currently being previewed\n    // during mouse hover\n    const hoverBoundingBox = options[\"hoverBoundingBox\"] || false;\n    // If true, a bounding box will show the area currently being previewed\n    // during touch events\n    const touchBoundingBox = options[\"touchBoundingBox\"] || false;\n    // A DOM element to append the bounding box to.\n    const boundingBoxContainer = options[\"boundingBoxContainer\"] || document.body;\n    // If true, the events related to handleTouch use passive listeners in\n    // order to improve performance for touch devices.\n    const passive = options[\"passive\"] || false;\n\n    if (inlinePane !== true && !isDOMElement(paneContainer)) {\n      throw new TypeError(\"`paneContainer` must be a DOM element when `inlinePane !== true`\");\n    }\n    if (!isDOMElement(inlineContainer)) {\n      throw new TypeError(\"`inlineContainer` must be a DOM element\");\n    }\n\n    this.settings = {\n      namespace,\n      showWhitespaceAtEdges,\n      containInline,\n      inlineOffsetX,\n      inlineOffsetY,\n      inlineContainer,\n      sourceAttribute,\n      zoomFactor,\n      paneContainer,\n      inlinePane,\n      handleTouch,\n      onShow,\n      onHide,\n      injectBaseStyles,\n      hoverDelay,\n      touchDelay,\n      hoverBoundingBox,\n      touchBoundingBox,\n      boundingBoxContainer,\n      passive,\n    };\n\n    if (this.settings.injectBaseStyles) {\n      injectBaseStylesheet();\n    }\n\n    this._buildZoomPane();\n    this._buildTrigger();\n  }\n\n  get isShowing() {\n    return this.zoomPane.isShowing;\n  }\n\n  get zoomFactor() {\n    return this.settings.zoomFactor;\n  }\n\n  set zoomFactor(zf) {\n    this.settings.zoomFactor = zf;\n    this.zoomPane.settings.zoomFactor = zf;\n    this.trigger.settings.zoomFactor = zf;\n    this.boundingBox.settings.zoomFactor = zf;\n  }\n\n  _buildZoomPane() {\n    this.zoomPane = new ZoomPane({\n      container: this.settings.paneContainer,\n      zoomFactor: this.settings.zoomFactor,\n      showWhitespaceAtEdges: this.settings.showWhitespaceAtEdges,\n      containInline: this.settings.containInline,\n      inline: this.settings.inlinePane,\n      namespace: this.settings.namespace,\n      inlineOffsetX: this.settings.inlineOffsetX,\n      inlineOffsetY: this.settings.inlineOffsetY,\n      inlineContainer: this.settings.inlineContainer,\n    });\n  }\n\n  _buildTrigger() {\n    this.trigger = new Trigger({\n      el: this.triggerEl,\n      zoomPane: this.zoomPane,\n      handleTouch: this.settings.handleTouch,\n      onShow: this.settings.onShow,\n      onHide: this.settings.onHide,\n      sourceAttribute: this.settings.sourceAttribute,\n      hoverDelay: this.settings.hoverDelay,\n      touchDelay: this.settings.touchDelay,\n      hoverBoundingBox: this.settings.hoverBoundingBox,\n      touchBoundingBox: this.settings.touchBoundingBox,\n      namespace: this.settings.namespace,\n      zoomFactor: this.settings.zoomFactor,\n      boundingBoxContainer: this.settings.boundingBoxContainer,\n      passive: this.settings.passive,\n    });\n  }\n\n  setZoomImageURL(imageURL) {\n    this.zoomPane._setImageURL(imageURL);\n  }\n\n  disable() {\n    this.trigger.enabled = false;\n  }\n\n  enable() {\n    this.trigger.enabled = true;\n  }\n\n  destroy() {\n    this.trigger._hide();\n    this.trigger._unbindEvents();\n  }\n}\n\n// Public API\n/* eslint-disable no-self-assign */\nObject.defineProperty(Drift.prototype, \"isShowing\", {\n  get: function () {\n    return this.isShowing;\n  },\n});\nObject.defineProperty(Drift.prototype, \"zoomFactor\", {\n  get: function () {\n    return this.zoomFactor;\n  },\n  set: function (value) {\n    this.zoomFactor = value;\n  },\n});\nDrift.prototype[\"setZoomImageURL\"] = Drift.prototype.setZoomImageURL;\nDrift.prototype[\"disable\"] = Drift.prototype.disable;\nDrift.prototype[\"enable\"] = Drift.prototype.enable;\nDrift.prototype[\"destroy\"] = Drift.prototype.destroy;\n/* eslint-enable no-self-assign */\n"],"mappings":"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"}