{"version":3,"file":"ZoomPane.js","names":["ZoomPane","options","HAS_ANIMATION","document","divStyle","createElement","style","_completeShow","bind","_completeHide","_handleLoad","isShowing","container","zoomFactor","inline","namespace","showWhitespaceAtEdges","containInline","inlineOffsetX","inlineOffsetY","inlineContainer","body","settings","openClasses","_buildClasses","openingClasses","closingClasses","inlineClasses","loadingClasses","_buildElement","suffix","classes","ns","push","el","loaderEl","appendChild","imgEl","imageURL","setAttribute","triggerWidth","triggerHeight","width","height","percentageOffsetX","percentageOffsetY","triggerRect","imgElWidth","offsetWidth","imgElHeight","offsetHeight","elWidth","elHeight","centreOfContainerX","centreOfContainerY","targetImgXToBeCentre","targetImgYToBeCentre","left","top","differenceBetweenContainerWidthAndImgWidth","differenceBetweenContainerHeightAndImgHeight","isContainerLargerThanImgX","isContainerLargerThanImgY","minLeft","minTop","maxLeft","maxTop","parentElement","scrollX","window","pageXOffset","scrollY","pageYOffset","inlineLeft","inlineTop","transform","webkitTransform","removeEventListener","_removeListenersAndResetClasses","getAttribute","addEventListener","_setImageURL","_setImageSize","_isInline","_showInline","_showInContainer","removeChild","innerWidth"],"sources":["../src/js/ZoomPane.js"],"sourcesContent":["import throwIfMissing from \"./util/throwIfMissing\";\nimport { addClasses, removeClasses } from \"./util/dom\";\n\nexport default class ZoomPane {\n  constructor(options = {}) {\n    // All officially-supported browsers have this, but it's easy to\n    // account for, just in case.\n    this.HAS_ANIMATION = false;\n    if (typeof document !== \"undefined\") {\n      const divStyle = document.createElement(\"div\").style;\n      this.HAS_ANIMATION = \"animation\" in divStyle || \"webkitAnimation\" in divStyle;\n    }\n\n    this._completeShow = this._completeShow.bind(this);\n    this._completeHide = this._completeHide.bind(this);\n    this._handleLoad = this._handleLoad.bind(this);\n\n    this.isShowing = false;\n\n    const {\n      container = null,\n      zoomFactor = throwIfMissing(),\n      inline = throwIfMissing(),\n      namespace = null,\n      showWhitespaceAtEdges = throwIfMissing(),\n      containInline = throwIfMissing(),\n      inlineOffsetX = 0,\n      inlineOffsetY = 0,\n      inlineContainer = document.body,\n    } = options;\n\n    this.settings = {\n      container,\n      zoomFactor,\n      inline,\n      namespace,\n      showWhitespaceAtEdges,\n      containInline,\n      inlineOffsetX,\n      inlineOffsetY,\n      inlineContainer,\n    };\n\n    this.openClasses = this._buildClasses(\"open\");\n    this.openingClasses = this._buildClasses(\"opening\");\n    this.closingClasses = this._buildClasses(\"closing\");\n    this.inlineClasses = this._buildClasses(\"inline\");\n    this.loadingClasses = this._buildClasses(\"loading\");\n\n    this._buildElement();\n  }\n\n  _buildClasses(suffix) {\n    const classes = [`drift-${suffix}`];\n\n    const ns = this.settings.namespace;\n    if (ns) {\n      classes.push(`${ns}-${suffix}`);\n    }\n\n    return classes;\n  }\n\n  _buildElement() {\n    this.el = document.createElement(\"div\");\n    addClasses(this.el, this._buildClasses(\"zoom-pane\"));\n\n    const loaderEl = document.createElement(\"div\");\n    addClasses(loaderEl, this._buildClasses(\"zoom-pane-loader\"));\n    this.el.appendChild(loaderEl);\n\n    this.imgEl = document.createElement(\"img\");\n    this.el.appendChild(this.imgEl);\n  }\n\n  _setImageURL(imageURL) {\n    this.imgEl.setAttribute(\"src\", imageURL);\n  }\n\n  _setImageSize(triggerWidth, triggerHeight) {\n    this.imgEl.style.width = `${triggerWidth * this.settings.zoomFactor}px`;\n    this.imgEl.style.height = `${triggerHeight * this.settings.zoomFactor}px`;\n  }\n\n  // `percentageOffsetX` and `percentageOffsetY` must be percentages\n  // expressed as floats between `0' and `1`.\n  setPosition(percentageOffsetX, percentageOffsetY, triggerRect) {\n    const imgElWidth = this.imgEl.offsetWidth;\n    const imgElHeight = this.imgEl.offsetHeight;\n    const elWidth = this.el.offsetWidth;\n    const elHeight = this.el.offsetHeight;\n\n    const centreOfContainerX = elWidth / 2;\n    const centreOfContainerY = elHeight / 2;\n\n    const targetImgXToBeCentre = imgElWidth * percentageOffsetX;\n    const targetImgYToBeCentre = imgElHeight * percentageOffsetY;\n\n    let left = centreOfContainerX - targetImgXToBeCentre;\n    let top = centreOfContainerY - targetImgYToBeCentre;\n\n    const differenceBetweenContainerWidthAndImgWidth = elWidth - imgElWidth;\n    const differenceBetweenContainerHeightAndImgHeight = elHeight - imgElHeight;\n    const isContainerLargerThanImgX = differenceBetweenContainerWidthAndImgWidth > 0;\n    const isContainerLargerThanImgY = differenceBetweenContainerHeightAndImgHeight > 0;\n\n    const minLeft = isContainerLargerThanImgX ? differenceBetweenContainerWidthAndImgWidth / 2 : 0;\n    const minTop = isContainerLargerThanImgY ? differenceBetweenContainerHeightAndImgHeight / 2 : 0;\n\n    const maxLeft = isContainerLargerThanImgX\n      ? differenceBetweenContainerWidthAndImgWidth / 2\n      : differenceBetweenContainerWidthAndImgWidth;\n    const maxTop = isContainerLargerThanImgY\n      ? differenceBetweenContainerHeightAndImgHeight / 2\n      : differenceBetweenContainerHeightAndImgHeight;\n\n    if (this.el.parentElement === this.settings.inlineContainer) {\n      // This may be needed in the future to deal with browser event\n      // inconsistencies, but it's difficult to tell for sure.\n      // let scrollX = isTouch ? 0 : window.scrollX;\n      // let scrollY = isTouch ? 0 : window.scrollY;\n      const scrollX = window.pageXOffset;\n      const scrollY = window.pageYOffset;\n\n      let inlineLeft =\n        triggerRect.left + percentageOffsetX * triggerRect.width - elWidth / 2 + this.settings.inlineOffsetX + scrollX;\n      let inlineTop =\n        triggerRect.top + percentageOffsetY * triggerRect.height - elHeight / 2 + this.settings.inlineOffsetY + scrollY;\n\n      if (this.settings.containInline) {\n        if (inlineLeft < triggerRect.left + scrollX) {\n          inlineLeft = triggerRect.left + scrollX;\n        } else if (inlineLeft + elWidth > triggerRect.left + triggerRect.width + scrollX) {\n          inlineLeft = triggerRect.left + triggerRect.width - elWidth + scrollX;\n        }\n\n        if (inlineTop < triggerRect.top + scrollY) {\n          inlineTop = triggerRect.top + scrollY;\n        } else if (inlineTop + elHeight > triggerRect.top + triggerRect.height + scrollY) {\n          inlineTop = triggerRect.top + triggerRect.height - elHeight + scrollY;\n        }\n      }\n\n      this.el.style.left = `${inlineLeft}px`;\n      this.el.style.top = `${inlineTop}px`;\n    }\n\n    if (!this.settings.showWhitespaceAtEdges) {\n      if (left > minLeft) {\n        left = minLeft;\n      } else if (left < maxLeft) {\n        left = maxLeft;\n      }\n\n      if (top > minTop) {\n        top = minTop;\n      } else if (top < maxTop) {\n        top = maxTop;\n      }\n    }\n\n    this.imgEl.style.transform = `translate(${left}px, ${top}px)`;\n    this.imgEl.style.webkitTransform = `translate(${left}px, ${top}px)`;\n  }\n\n  get _isInline() {\n    const inline = this.settings.inline;\n\n    return inline === true || (typeof inline === \"number\" && window.innerWidth <= inline);\n  }\n\n  _removeListenersAndResetClasses() {\n    this.el.removeEventListener(\"animationend\", this._completeShow);\n    this.el.removeEventListener(\"animationend\", this._completeHide);\n    this.el.removeEventListener(\"webkitAnimationEnd\", this._completeShow);\n    this.el.removeEventListener(\"webkitAnimationEnd\", this._completeHide);\n    removeClasses(this.el, this.openClasses);\n    removeClasses(this.el, this.closingClasses);\n  }\n\n  show(imageURL, triggerWidth, triggerHeight) {\n    this._removeListenersAndResetClasses();\n    this.isShowing = true;\n\n    addClasses(this.el, this.openClasses);\n\n    if (this.imgEl.getAttribute(\"src\") != imageURL) {\n      addClasses(this.el, this.loadingClasses);\n      this.imgEl.addEventListener(\"load\", this._handleLoad);\n      this._setImageURL(imageURL);\n    }\n\n    this._setImageSize(triggerWidth, triggerHeight);\n\n    if (this._isInline) {\n      this._showInline();\n    } else {\n      this._showInContainer();\n    }\n\n    if (this.HAS_ANIMATION) {\n      this.el.addEventListener(\"animationend\", this._completeShow);\n      this.el.addEventListener(\"webkitAnimationEnd\", this._completeShow);\n      addClasses(this.el, this.openingClasses);\n    }\n  }\n\n  _showInline() {\n    this.settings.inlineContainer.appendChild(this.el);\n    addClasses(this.el, this.inlineClasses);\n  }\n\n  _showInContainer() {\n    this.settings.container.appendChild(this.el);\n  }\n\n  hide() {\n    this._removeListenersAndResetClasses();\n    this.isShowing = false;\n\n    if (this.HAS_ANIMATION) {\n      this.el.addEventListener(\"animationend\", this._completeHide);\n      this.el.addEventListener(\"webkitAnimationEnd\", this._completeHide);\n      addClasses(this.el, this.closingClasses);\n    } else {\n      removeClasses(this.el, this.openClasses);\n      removeClasses(this.el, this.inlineClasses);\n    }\n  }\n\n  _completeShow() {\n    this.el.removeEventListener(\"animationend\", this._completeShow);\n    this.el.removeEventListener(\"webkitAnimationEnd\", this._completeShow);\n\n    removeClasses(this.el, this.openingClasses);\n  }\n\n  _completeHide() {\n    this.el.removeEventListener(\"animationend\", this._completeHide);\n    this.el.removeEventListener(\"webkitAnimationEnd\", this._completeHide);\n\n    removeClasses(this.el, this.openClasses);\n    removeClasses(this.el, this.closingClasses);\n    removeClasses(this.el, this.inlineClasses);\n\n    this.el.style.left = \"\";\n    this.el.style.top = \"\";\n\n    // The window could have been resized above or below `inline`\n    // limits since the ZoomPane was shown. Because of this, we\n    // can't rely on `this._isInline` here.\n    if (this.el.parentElement === this.settings.container) {\n      this.settings.container.removeChild(this.el);\n    } else if (this.el.parentElement === this.settings.inlineContainer) {\n      this.settings.inlineContainer.removeChild(this.el);\n    }\n  }\n\n  _handleLoad() {\n    this.imgEl.removeEventListener(\"load\", this._handleLoad);\n    removeClasses(this.el, this.loadingClasses);\n  }\n}\n"],"mappings":"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"}