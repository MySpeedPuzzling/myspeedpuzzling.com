<div {{ attributes }}>
    {% if this.isLoggedIn %}
        <li><hr class="dropdown-divider"></li>
        
        <li>
            <a class="dropdown-item" 
               data-bs-toggle="modal" 
               data-bs-target="#add-puzzle-to-collection"
               href="#">
                <i class="ci-bookmark-plus me-1"></i> {{ 'collections.add_to_collection'|trans }}
            </a>
        </li>
        
        {% for collection in this.collections %}
            <li>
                <form method="post" action="{{ path('remove_puzzle_from_collection', {puzzleId: this.puzzleId}) }}" class="d-inline">
                    <input type="hidden" name="collectionId" value="{{ collection.collectionId }}">
                    <input type="hidden" name="returnUrl" value="{{ app.request.requestUri }}">
                    <button type="submit" class="dropdown-item text-danger" onclick="return confirm('{{ 'collections.confirm_remove'|trans }}')">
                        <i class="ci-bookmark-minus me-1"></i> {{ 'collections.remove_from'|trans({'%collection%': collection.collectionName}) }}
                    </button>
                </form>
            </li>
        {% endfor %}
    {% endif %}
</div>
