{% extends 'base.html.twig' %}

{% block title %}
    {% set currentLadder = app.request.attributes.get('_route') %}

    {% if currentLadder starts with 'ladder_solo_500_pieces' %}
        {{ 'ladder.title'|trans }} - {{ 'ladder.solo'|trans }} - {{ 'pieces_count'|trans({ '%count%': 500 })|raw }}
    {% elseif currentLadder starts with 'ladder_solo_1000_pieces' %}
        {{ 'ladder.title'|trans }} - {{ 'ladder.solo'|trans }} - {{ 'pieces_count'|trans({ '%count%': 1000 })|raw }}
    {% elseif currentLadder starts with 'ladder_pairs_500_pieces' %}
        {{ 'ladder.title'|trans }} - {{ 'ladder.duo'|trans }} - {{ 'pieces_count'|trans({ '%count%': 500 })|raw }}
    {% elseif currentLadder starts with 'ladder_pairs_1000_pieces' %}
        {{ 'ladder.title'|trans }} - {{ 'ladder.duo'|trans }} - {{ 'pieces_count'|trans({ '%count%': 1000 })|raw }}
    {% elseif currentLadder starts with 'ladder_groups_500_pieces' %}
        {{ 'ladder.title'|trans }} - {{ 'ladder.team'|trans }} - {{ 'pieces_count'|trans({ '%count%': 500 })|raw }}
    {% elseif currentLadder starts with 'ladder_groups_1000_pieces' %}
        {{ 'ladder.title'|trans }} - {{ 'ladder.team'|trans }} - {{ 'pieces_count'|trans({ '%count%': 1000 })|raw }}
    {% endif %}
{% endblock %}

{% block content %}
    {% set currentLadder = app.request.attributes.get('_route') %}
    {% set type = currentLadder starts with 'ladder_solo' ? 'solo' : (currentLadder starts with 'ladder_pairs' ? 'pairs' : 'groups') %}
    {% set pieces = currentLadder matches '/1000/' ? 1000 : 500 %}

    <h1 class="mb-4">{{ 'ladder.title'|trans }} <span class="h3"><span class="ms-2 badge bg-primary rounded-pill badge-shadow">Top 100</span></span></h1>

    {{ include('_ladder_dropdown.html.twig') }}

    {{ include('_ladder_dropdown_countries.html.twig') }}

    <twig:LadderTable loading="lazy" :type="type" :piecesCount="pieces" :limit="100" :countryCode="active_country ? active_country.name : null" />
{% endblock %}
